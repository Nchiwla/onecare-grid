
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>One Care Interactive Grid</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f6f8;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .grid-container {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      width: 70%;
    }
    .grid-header {
      background-color: #00796b;
      color: white;
      font-weight: bold;
      text-align: center;
      padding: 12px;
      border-radius: 6px;
      font-size: 1rem;
    }
    .grid-cell {
      background: white;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      padding: 10px;
      font-size: 0.9rem;
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
    }
    .grid-cell:hover {
      border: 2px solid #9c27b0;
      cursor: pointer;
    }
    .grid-cell:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 0;
      top: 100%;
      margin-top: 8px;
      background: #9c27b0;
      color: white;
      padding: 6px;
      font-size: 0.8rem;
      border-radius: 4px;
      white-space: pre-wrap;
      z-index: 10;
    }
    .grid-cell strong {
      display: block;
      margin-bottom: 6px;
    }
    .grid-cell button {
      margin: 0 4px;
    }
    .sidebar {
      width: 28%;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.15);
    }
    .summary {
      font-weight: bold;
      margin-bottom: 10px;
    }
    #chartContainer {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="grid-container" id="grid"></div>
  <div class="sidebar">
    <div class="summary">Average Market Cost: $<span id="marketTotal">0</span></div>
    <div class="summary" style="color: green">One Care Saving: $<span id="savings">0</span> (<span id="percentSaved">0%</span>)</div>
    <div class="summary">Your One Care Cost: <strong>$<span id="oneCareTotal">0</span></strong></div>
    <canvas id="priceChart" width="250" height="120"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const categories = ["Aged Care", "Children", "Pets", "Everyday Person", "All Abilities", "Students"];
    const serviceTypes = ["Health & Wellbeing", "Daily Living Support", "Education & Skill Building", "Social & Recreation"];

    const services = [
      { name: "Nursing care", type: "Health & Wellbeing", category: "Aged Care", oneCare: 95, market: 114, tooltip: "Medication, in-home nurse, wellbeing checks" },
      { name: "Pediatric therapy", type: "Health & Wellbeing", category: "Children", oneCare: 90, market: 108, tooltip: "Therapy sessions, child health plans" },
      { name: "Veterinary grooming", type: "Health & Wellbeing", category: "Pets", oneCare: 60, market: 72, tooltip: "Brushing, ear cleaning, trimming" },
      { name: "Fitness support", type: "Health & Wellbeing", category: "Everyday Person", oneCare: 65, market: 78, tooltip: "Personal trainer, guided wellness" },
      { name: "Allied health", type: "Health & Wellbeing", category: "All Abilities", oneCare: 105, market: 126, tooltip: "OT, PT, ST services through NDIS" },
      { name: "Meal prep", type: "Daily Living Support", category: "Aged Care", oneCare: 85, market: 102, tooltip: "Home cooking, companionship, diet plans" },
      { name: "Support workers", type: "Daily Living Support", category: "All Abilities", oneCare: 80, market: 96, tooltip: "In-home assistance, daily tasks" },
      { name: "Pet sitting", type: "Daily Living Support", category: "Pets", oneCare: 55, market: 66, tooltip: "Feeding, walking, short-term care" },
      { name: "Cleaning", type: "Daily Living Support", category: "Everyday Person", oneCare: 50, market: 60, tooltip: "Mopping, bathroom, kitchens" },
      { name: "Early learning", type: "Education & Skill Building", category: "Children", oneCare: 60, market: 72, tooltip: "Pre-K education & tutoring" },
      { name: "Obedience training", type: "Education & Skill Building", category: "Pets", oneCare: 50, market: 60, tooltip: "Basic commands & leash behavior" },
      { name: "Adult learning", type: "Education & Skill Building", category: "Everyday Person", oneCare: 55, market: 66, tooltip: "Digital skills, budgeting, resumes" },
      { name: "Inclusive education", type: "Education & Skill Building", category: "All Abilities", oneCare: 70, market: 84, tooltip: "Adaptive classroom support" },
      { name: "Group activities", type: "Social & Recreation", category: "Aged Care", oneCare: 65, market: 78, tooltip: "Day trips, bingo, community time" },
      { name: "Sports & arts", type: "Social & Recreation", category: "Children", oneCare: 50, market: 60, tooltip: "After school sport & music" },
      { name: "Playdates", type: "Social & Recreation", category: "Pets", oneCare: 45, market: 54, tooltip: "Supervised social dog time" },
      { name: "Hobby groups", type: "Social & Recreation", category: "Everyday Person", oneCare: 40, market: 48, tooltip: "Book clubs, games, events" },
      { name: "Inclusive rec", type: "Social & Recreation", category: "All Abilities", oneCare: 65, market: 78, tooltip: "Adaptive sport & safe activities" }
    ];

    const grid = document.getElementById("grid");
    let clickCounts = {};

    categories.forEach(category => {
      const header = document.createElement("div");
      header.className = "grid-header";
      header.innerText = category;
      grid.appendChild(header);
    });

    serviceTypes.forEach(type => {
      categories.forEach(category => {
        const service = services.find(s => s.type === type && s.category === category);
        const cell = document.createElement("div");
        cell.className = "grid-cell";
        if (service) {
          const id = `${type}-${category}`.replace(/\s+/g, '-');
          clickCounts[id] = 0;
          cell.setAttribute("data-tooltip", service.tooltip || "Details available on request");
          cell.innerHTML = `
            <strong>${service.name}</strong>
            ($${service.oneCare} vs $${service.market})<br>
            <button onclick="changeHours('${id}', -1, event)">âˆ’</button>
            <span id="counter-${id}">0 hr</span>
            <button onclick="changeHours('${id}', 1, event)">+</button>
          `;
          cell.dataset.oneCare = service.oneCare;
          cell.dataset.market = service.market;
        } else {
          cell.innerHTML = "<em>N/A</em>";
        }
        grid.appendChild(cell);
      });
    });

    function changeHours(id, delta, event) {
      event.stopPropagation();
      clickCounts[id] = Math.max(0, (clickCounts[id] || 0) + delta);
      document.getElementById(`counter-${id}`).innerText = `${clickCounts[id]} hr`;
      updateTotals();
    }

    function updateTotals() {
      let oneCareTotal = 0;
      let marketTotal = 0;
      Object.entries(clickCounts).forEach(([id, count]) => {
        if (count > 0) {
          const cell = document.querySelector(`[id='counter-${id}']`).closest('.grid-cell');
          const one = parseFloat(cell.dataset.oneCare);
          const market = parseFloat(cell.dataset.market);
          oneCareTotal += one * count;
          marketTotal += market * count;
        }
      });

      const savings = marketTotal - oneCareTotal;
      const percent = marketTotal > 0 ? ((savings / marketTotal) * 100).toFixed(1) : "0";

      document.getElementById("marketTotal").innerText = marketTotal.toFixed(2);
      document.getElementById("oneCareTotal").innerText = oneCareTotal.toFixed(2);
      document.getElementById("savings").innerText = savings.toFixed(2);
      document.getElementById("percentSaved").innerText = percent + "%";

      const ctx = document.getElementById("priceChart").getContext("2d");
      if (window.bar) window.bar.destroy();
      window.bar = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Market Cost", "One Care"],
          datasets: [{
            label: "Cost Comparison",
            data: [marketTotal, oneCareTotal],
            backgroundColor: ["#e53935", "#4caf50"]
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false }},
          scales: { y: { beginAtZero: true } }
        }
      });
    }
  </script>
</body>
</html>
